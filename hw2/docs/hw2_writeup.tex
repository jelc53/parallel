\documentclass[12pt,letterpaper,twoside]{article}

\newif\ifsolution\solutiontrue   % Include the solutions
%\newif\ifsolution\solutionfalse  % Exclude the solutions

\usepackage{cme213}
\usepackage{xcolor}

\newcommand{\T}[1]{\text{\texttt{#1}}}
\newcommand{\V}[1]{\text{\textit{#1}}}

\begin{document}

{\centering \textbf{Homework 1\\ Due Friday, April 8th via GradeScope\\}}
\vspace*{-8pt}\noindent\rule{\linewidth}{1pt}

\paragraph{Problem 1: } Implement a parallel function that sums separately the odd
and even values of a vector. 

Idea: Need to implement \texttt{parallelSum} using \texttt{omp parallel for} with 
reductions for both even and odd accumulators.

\begin{cpp}
std::vector<uint> parallelSum(const std::vector<uint> &v) 
{
    omp_set_num_threads(4);
    std::vector<uint> sums(2);
    uint sum0 = 0; uint sum1 = 0;

    #pragma omp parallel for reduction(+:sum0) reduction(+:sum1)
    for(uint i=0; i<v.size(); i++) {
        if (v[i] % 2 == 0) {
            sum0 += v[i];
        }
        else {
            sum1 += v[i];
        }
    }
    sums[0] = sum0; sums[1] = sum1;
    return sums;
}
\end{cpp}

Console logs from \texttt{main\_q1.cpp}.
\begin{verbatim}
$ make main_q1
g++ -std=c++11 -g -Wall -O3 -fopenmp main_q1.cpp -o main_q1

$ ./main_q1
Parallel
Sum Even: 757361650
Sum Odd: 742539102
Time: 0.00433168
Serial
Sum Even: 757361650
Sum Odd: 742539102
Time: 0.106256
main_q1.cpp:60:main     TEST PASSED.
\end{verbatim}


\paragraph{Problem 2: } Implement Radix Sort in parallel ...

\begin{itemize}
    \item \textbf{Question 1: computeBlockHistograms()} Idea: using \texttt{openMP}
    to parallelize computation across "blocks" when creaing local histograms.
    Code must pass Test1().

    \begin{verbatim}
    $ make main_q2
    g++ -std=c++11 -g -Wall -O3 -fopenmp main_q2.cpp -o main_q2

    $ ./main_q2
    tests_q2.h:22:Test1     TEST PASSED.
    \end{verbatim}

    \item \textbf{Question 2: reduceLocalHistoToGlobal()} Idea: accumulate values 
    based on the remainder of the \texttt{index} divided by \texttt{bucketSize}.
    Code must pass Test2().

    \begin{verbatim}
    $ make main_q2
    g++ -std=c++11 -g -Wall -O3 -fopenmp main_q2.cpp -o main_q2

    $ ./main_q2
    tests_q2.h:22:Test1     TEST PASSED.
    tests_q2.h:38:Test2     TEST PASSED.
    \end{verbatim}

    \item \textbf{Question 3: scanGlocalHisto()} Idea: ...

\end{itemize}

Submission information logs.
\begin{verbatim}
$ /afs/ir.stanford.edu/class/cme213/script/submit.py hw1 private/cme213-jelc53/hw1
Submission for assignment 'hw1' as user 'jelc'
Attempt 1/10
Time stamp: 2022-04-01 20:53
List of files being copied:
    private/cme213-jelc53/hw1/main_q1.cpp	 [3875 bytes]
    private/cme213-jelc53/hw1/main_q2.cpp	 [1213 bytes]
    private/cme213-jelc53/hw1/main_q3.cpp	 [1362 bytes]
    private/cme213-jelc53/hw1/main_q4.cpp	 [5117 bytes]
    private/cme213-jelc53/hw1/matrix.hpp	 [3036 bytes]

Your files were copied successfully.
Directory where files were copied: /afs/ir.stanford.edu/class/cme213/submissions/hw1/jelc/1
List of files in this directory:
    main_q1.cpp	 [3875 bytes]
    main_q2.cpp	 [1213 bytes]
    main_q3.cpp	 [1362 bytes]
    main_q4.cpp	 [5117 bytes]
    matrix.hpp	 [3036 bytes]
    metadata	 [137 bytes]

This completes the submission process. Thank you!
\end{verbatim}

\end{document}
